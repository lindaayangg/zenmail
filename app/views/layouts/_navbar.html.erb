<div class="navbar bg-base-100 fixed top-0 z-[1000]">
  <div class="navbar-start">
    <%= link_to dashboard_root_path, class: 'flex items-center gap-2 px-2 py-1 rounded-lg group' do %>
      <div class="transition-all duration-300 group-hover:shadow-[0_0_20px_rgba(var(--p),0.7)] group-hover:scale-110">
        <%= image_tag '/logo.svg', class: 'size-8' %>
      </div>
      <span class="font-bold">
        Easy<span class="text-primary border-primary">Story</span>
      </span>
    <% end %>
  </div>
  <div class="navbar-center hidden md:flex">
    <ul class="menu menu-horizontal px-1 gap-2 z-50">
      <li>
        <%= link_to dashboard_root_path, 
            class: "#{current_page?(dashboard_root_path) ? 'active bg-base-200 font-medium' : ''} flex gap-2 items-center #{!signed_in? ? 'pointer-events-none opacity-50' : ''} relative", 
            data: { tooltip: signed_in? ? nil : "Please sign in first" } do %>
          <%= lucide_icon "home", class: "size-4" %>
          Dashboard
        <% end %>
      </li>
      <li>
        <%= link_to dashboard_subscription_path,
            class: "#{current_page?(dashboard_subscription_path) ? 'active bg-base-200 font-medium' : ''} flex gap-2 items-center #{!signed_in? ? 'pointer-events-none opacity-50' : ''}",
            data: { tooltip: signed_in? ? nil : "Please sign in first" } do %>
          <%= lucide_icon "credit-card", class: "size-4" %>
          Subscription
        <% end %>
      </li>
      <li>
        <%= link_to dashboard_support_path, 
            class: "#{current_page?(dashboard_support_path) ? 'active bg-base-200 font-medium' : ''} flex gap-2 items-center #{!signed_in? ? 'pointer-events-none opacity-50' : ''}",
            data: { tooltip: signed_in? ? nil : "Please sign in first" } do %>
          <%= lucide_icon "message-circle", class: "size-4" %>
          Support
        <% end %>
      </li>
    </ul>
  </div>
  <div class="navbar-end">
    <!-- Only show notifications if signed in -->
    <% if signed_in? %>
      <!-- Notifications Dropdown -->
      <div class="dropdown dropdown-end hidden md:block">
        <div tabindex="0" role="button" class="btn btn-ghost btn-circle">
          <!--
          <div class="indicator">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" /></svg>
            <span class="badge badge-xs badge-primary indicator-item"></span>
          </div>
          -->
          <%= lucide_icon('bell', class: 'size-5') %>
        </div>
        <ul tabindex="0" class="dropdown-content menu menu-sm z-[1] p-4 shadow-xl bg-base-100 rounded-box w-80 mt-4">
          <li class="menu-title px-4 py-2">
            <span class="font-medium">Notifications</span>
          </li>
          <div>
            <div class="flex flex-col items-center justify-center py-4">
              <%= lucide_icon('bell-off', class: 'size-5 opacity-60 mb-2') %>
              <p class="text-sm opacity-60">No new notifications</p>
            </div>
          </div>
        </ul>
      </div>
    <% end %>
    <!-- Profile/Sign In Button -->
    <div class="dropdown dropdown-end ml-2 mr-2">
      <div tabindex="0" role="button" class="btn btn-ghost btn-circle">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
        </svg>
      </div>
      <ul tabindex="0" class="dropdown-content menu menu-sm z-[1] p-3 shadow-xl bg-base-100 rounded-box w-60 mt-4">
        <% if signed_in? %>
          <li class="menu-title py-2">
            <span class="font-medium"><%= current_user.name.presence || current_user.email %></span>
          </li>
          <li>
            <%= link_to dashboard_settings_path, class: "flex gap-2 text-black py-2" do %>
              <%= lucide_icon "settings", class: "size-4" %>
              Settings
            <% end %>
          </li>
          <div class="divider my-1"></div>
          <li>
            <%= link_to sign_out_path, class: "flex gap-2 text-error py-2", data: { turbo_method: :delete } do %>
              <%= lucide_icon "log-out", class: "size-4" %>
              Sign out
            <% end %>
          </li>
        <% else %>
          <li>
            <%= link_to sign_in_path, class: "flex gap-2" do %>
              <svg xmlns="http://www.w3.org/2000/svg" class="size-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                <polyline points="10 17 15 12 10 7"></polyline>
                <line x1="15" y1="12" x2="3" y2="12"></line>
              </svg>
              Sign in
            <% end %>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</div>
<%# Mobile Bottom Dock Navigation - only shown on mobile %>
<div class="md:hidden">
  <div class="dock dock-md bg-base-100 fixed bottom-0 left-0 right-0 border-t border-gray-200 dark:border-gray-600 z-[1000]">
    <%= link_to dashboard_root_path, 
        class: "#{current_page?(dashboard_root_path) ? 'dock-active' : ''} relative", 
        disabled: signed_in? ? nil : 'disabled',
        data: { tooltip: signed_in? ? nil : "Please sign in first" } do %>
      <%= lucide_icon "home", class: "size-5" %>
      <span class="dock-label">Dashboard</span>
    <% end %>
    <%= link_to dashboard_subscription_path, 
        class: "#{current_page?(dashboard_subscription_path) ? 'dock-active' : ''}", 
        disabled: signed_in? ? nil : 'disabled',
        data: { tooltip: signed_in? ? nil : "Please sign in first" } do %>
      <%= lucide_icon "credit-card", class: "size-5" %>
      <span class="dock-label">Subscription</span>
    <% end %>
    <%= link_to dashboard_support_path, 
        class: "#{current_page?(dashboard_support_path) ? 'dock-active' : ''}", 
        disabled: signed_in? ? nil : 'disabled',
        data: { tooltip: signed_in? ? nil : "Please sign in first" } do %>
      <%= lucide_icon "message-circle", class: "size-5" %>
      <span class="dock-label">Support</span>
    <% end %>
    <% unless signed_in? %>
      <%= link_to sign_in_path do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="size-[1.2em]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 7h3a5 5 0 0 1 0 10h-3"></path>
          <path d="M6 10a2 2 0 1 1-2-2V6a2 2 0 1 1 2-2h3a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H6z"></path>
        </svg>
        <span class="dock-label">Sign in</span>
      <% end %>
    <% end %>
  </div>
</div>
